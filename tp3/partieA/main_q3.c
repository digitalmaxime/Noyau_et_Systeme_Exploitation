#include <semaphore.h>
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <assert.h>

struct argumentThread {
    int id_boucle;
    long unsigned int* tid;
};

void* acces_bd(int id_boucle, int tid){
    return NULL;
}

void* wrapper (void* _args) {
    struct argumentThread* args = (struct argumentThread*) _args;
    acces_bd(args->id_boucle, *(args->tid));
    printf("Numero du compter : %d, tid : %ld\n", args->id_boucle, *(args->tid));
    free(args);
    return NULL;
}

int main() {
    
    pthread_t tids[10];
    for (int i=0; i<10; i++) {
        struct argumentThread* args = malloc(sizeof(struct argumentThread));
        args->id_boucle = i;
        args->tid = &tids[i]; 
        assert (pthread_create(&tids[i], NULL, wrapper, args) == 0);
    }

    for (int i=0; i<10; i++) {
        pthread_join(tids[i], NULL);
    }
 
    return 0 ;
}